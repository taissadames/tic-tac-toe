<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
	<main>
        <section class="title"><h1>Tic Tac Toe</h1></section>
        <section class="board">
            <div> <input type="button" value="_"><input type="button" value="_"><input type="button" value="_"> </div>
            <div> <input type="button" value="_"><input type="button" value="_"><input type="button" value="_"> </div>
            <div> <input type="button" value="_"><input type="button" value="_"><input type="button" value="_"> </div>
        </section>
	</main>

	<input type="button" value="Restart" id="restart"> <h2>Player <span id="player"></span></h2>
</body>

</html>
<script>

const square = document.querySelectorAll('input');

const restartButton = document.querySelector('#restart');

const firstPlayer = document.querySelector('#player'); //to random select the player that will start the game.

var currentPlayer = '_'; // '_' = indefined player; 'X' = X player, 'O' = O player
var winner = '_'; // '_' = nobody wins; 'X' = player X is the winner, 'O' = player O is the winner
var finish;

for (var i = 0; i < 9; i++) {
	square[i].addEventListener('click', (event) => {
		//checks if the square value is empty
		if( (event.target.value=='_') && (winner=='_')) {
			event.target.value = currentPlayer
			event.target.style.color='black'

			changePlayer(); //change players between X player and O player

			winner = victory(); //checks if any of the players has own the game.
		}
	})
}

//Restarting the game:
restartButton.addEventListener('click', (event) => {
	for (var i = 0; i< 9; i++) {
		square[i].value='_'; //clear all squares
		square[i].style.color='#d3a0d8'; //value '_' appears
		square[i].style.backgroundColor='#d3a0d8'; //makes background 'invisible'
	}

	winner = '_' //Reset winner

	randomSelectPlayer() //Random select first player
})

var randomSelectPlayer = function() {
	if (Math.floor(Math.random() * 2) == 0) {
		currentPlayer = "O" //defines player O as current player
		firstPlayer.innerText="O" //displays current player as player O
	} else {
		currentPlayer = "X" //defines current player as player X
		firstPlayer.innerText="X" //displays current player as player X
	}
}
randomSelectPlayer()

//Alternate turns between player X and player O
var changePlayer = function() {
	if (currentPlayer == 'X') {
		currentPlayer = 'O';
		firstPlayer.innerText = 'O';	
	} else {
		currentPlayer = 'X';
		firstPlayer.innerText = 'X';
	}
}

//Winning possibilities: Color changes if a combination is achieved.
var victory = function() {
	if ((square[0].value==square[1].value) && (square[1].value==square[2].value) && square[0].value!='_' ) {
		square[0].style.backgroundColor='#0F0';
		square[1].style.backgroundColor='#0F0';
		square[2].style.backgroundColor='#0F0';

		return square[0].value;

	} else if ((square[3].value == square[4].value) && (square[4].value == square[5].value) && square[3].value!='_' ) {
		square[3].style.backgroundColor='#0F0';
		square[4].style.backgroundColor='#0F0';
		square[5].style.backgroundColor='#0F0';

		return square[3].value;

	} else if ((square[6].value == square[7].value) && (square[7].value == square[8].value) && square[6].value!='_' ) {
		square[6].style.backgroundColor='#0F0';
		square[7].style.backgroundColor='#0F0';
		square[8].style.backgroundColor='#0F0';

		return square[6].value;

	} else if ((square[0].value == square[3].value) && (square[3].value == square[6].value) && square[0].value!='_' ) {
		square[0].style.backgroundColor='#0F0';
		square[3].style.backgroundColor='#0F0';
		square[6].style.backgroundColor='#0F0';

		return square[0].value;

	} else if ((square[1].value == square[4].value) && (square[4].value == square[7].value) && square[1].value != '_' ) {
		square[1].style.backgroundColor = '#0F0';
		square[4].style.backgroundColor = '#0F0';
		square[7].style.backgroundColor = '#0F0';

		return square[1].value;

	} else if ((square[2].value == square[5].value) && (square[5].value == square[8].value) && square[2].value != '_' ) {
		square[2].style.backgroundColor = '#0F0';
		square[5].style.backgroundColor = '#0F0';
		square[8].style.backgroundColor = '#0F0';

		return square[2].value;
	} else if ((square[0].value == square[4].value) && (square[4].value == square[8].value) && square[0].value != '_' ) {
		square[0].style.backgroundColor = '#0F0';
		square[4].style.backgroundColor = '#0F0';
		square[8].style.backgroundColor = '#0F0';

		return square[0].value;

	} else if ((square[2].value == square[4].value) && (square[4].value == square[6].value) && square[2].value != '_' ) {
		square[2].style.backgroundColor = '#0F0';
		square[4].style.backgroundColor = '#0F0';
		square[6].style.backgroundColor = '#0F0';

		return square[2].value;
	}							
    return '_';
}

</script>
</html>